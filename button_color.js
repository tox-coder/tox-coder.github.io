(function () { 'use strict'; Lampa.Platform.tv(); function add() { var a = 's'; function updateT() { //var element = $(".view--torrent"); if(Lampa.Storage.field('BUTTONS_fix') == true) { //if(element.length > 0) { $(".view--onlines_v1", Lampa.Activity.active().activity.render()).empty().append("MODS's онлайн"); $(".view--torrent", Lampa.Activity.active().activity.render()).empty().append("Торренты"); $(".open--menu", Lampa.Activity.active().activity.render()).empty().append("Смотреть"); $(".view--trailer", Lampa.Activity.active().activity.render()).empty().append("Трейлеры"); $(".view--online", Lampa.Activity.active().activity.render()).empty().append("Смотреть"); $(".view--streamv1", Lampa.Activity.active().activity.render()).empty().append("Смотреть"); $(".view--bazon", Lampa.Activity.active().activity.render()).empty().append("Bazon"); $(".view--filmixpva", Lampa.Activity.active().activity.render()).empty().append("Filmix"); //} } } /* End updateT */ /* Скрываем ленту трейлеров на Главной */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'NoTrailerMainPage', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Скрыть Трейлеры-новинки', //Название подпункта меню description: 'Скрывает баннерную ленту на главной странице' //Комментарий к подпункту }, onChange: function (value) { //Действия при изменении подпункта var intervalID intervalID = setInterval(function() { /* Включили */ if (Lampa.Storage.field('NoTrailerMainPage') == true) { /* Мы на Главной? */ if (Lampa.Activity.active().component == 'main' && Lampa.Activity.active().source == 'cub') { $('#NoTrailerMainPage').remove(); var banner = 'div.activity__body > div > div > div > div > div:nth-child(1)' Lampa.Template.add('NoTrailerMainPage', '
'); $('body').append(Lampa.Template.get('NoTrailerMainPage', {}, true)); } /* Вышли из Главной */ if (Lampa.Activity.active().component !== 'main') { $('#NoTrailerMainPage').remove() } /* Мы в разделе Фильмы? */ if (Lampa.Activity.active().component == 'category' && Lampa.Activity.active().url == 'movie' && Lampa.Activity.active().source == 'cub') { $('#NoTrailerMainPage').remove(); var banner = 'div.activity__body > div > div > div > div > div:nth-child(2)' Lampa.Template.add('NoTrailerMainPage', '
'); $('body').append(Lampa.Template.get('NoTrailerMainPage', {}, true)); } } /* Выключили */ if (Lampa.Storage.field('NoTrailerMainPage') == false) { $('#NoTrailerMainPage').remove() clearInterval(intervalID) } }, 500); } }); /* Скрываем часы на заставке */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'NoTimeNoDate', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Скрыть часы на заставке CUB', //Название подпункта меню description: 'Если переживаете за выгорание экрана OLED' //Комментарий к подпункту }, onChange: function (value) { //Действия при изменении подпункта /* Chromecast */ if (Lampa.Storage.field('NoTimeNoDate') == true) { $('#notimedatescreen').remove(); Lampa.Template.add('notimedatescreen', '
'); $('body').append(Lampa.Template.get('notimedatescreen', {}, true)); } if (Lampa.Storage.field('NoTimeNoDate') == false) { $('#notimedatescreen').remove(); } } }); /* Хранитель Экрана */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'CustomScreenSaver', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Свой хранитель экрана', //Название подпункта меню description: 'Меняет скринсейвер на другой' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('CustomScreenSaver') == false) { Lampa.Storage.set ('screensaver_aerial_items', ''); } if(Lampa.Storage.field('CustomScreenSaver') == true) { Lampa.Storage.set ('screensaver_type', 'aerial'); Lampa.Storage.set ('screensaver_aerial_items', '[{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-01.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-02.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-03.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-04.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-05.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-06.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-07.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-08.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/birds-09.mkv"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/Aquarium_01.mp4"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/Aquarium_02.mp4"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/Aquarium_03.mp4"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/Aquarium_04.mp4"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""},{"id":"","accessibilityLabel":"","src":{"H2641080p":"http://lampatv.site/Aquarium_05.mp4"},"name":"","pointsOfInterest":{"0":""},"type":"","timeOfDay":""}]'); /* setInterval(function() { document.querySelector(".screensaver__video").removeAttr("muted"); }, 1000) */ } //Lampa.Settings.update(); } }); /* End Хранитель Экрана */ /* Скрываем панель навигации */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'NavyBar', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Скрыть панель навигации', //Название подпункта меню description: 'Если неправильно определился тип устройства' //Комментарий к подпункту }, onChange: function (value) { //Действия при изменении подпункта if (Lampa.Storage.field('NavyBar') == true) { Lampa.Template.add('no_bar', '
'); $('body').append(Lampa.Template.get('no_bar', {}, true)); var searchReturnButton = '
\n' + ' \n' + '
\n'; $('.open--search').hide(); $('#searchReturnButton').remove(); $('#app > div.head > div > div.head__actions').append(searchReturnButton); $('#searchReturnButton').on('hover:enter hover:click hover:touch', function() {Lampa.Search.open();}); $('.menu__item').on('click', function () { this.removeClass('focus'); this.addClass('focus'); }); } if (Lampa.Storage.field('NavyBar') == false) { $('.open--search').show(); $('#no_bar').remove(); $('#searchReturnButton').remove(); } // } }); // /* Выводим кнопку возврата на экране */ // Lampa.SettingsApi.addParam({ // component: 'Multi_Menu_Component', // param: { // name: 'BackButton', // type: 'trigger', //доступно select,input,trigger,title,static // default: false // }, // field: { // name: 'Кнопка возврата на экране', //Название подпункта меню // description: '' //Комментарий к подпункту // }, // onChange: function (value) { //Действия при изменении подпункта // if (Lampa.Storage.field('BackButton') == true) { // //backButton() // $('#backit').removeClass('hide') // } // if (Lampa.Storage.field('BackButton') == false) { // $('#backit').addClass('hide') // } // } // }); /* Отключение неиспользуемой раскладки клавиатуры */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'KeyboardSwitchOff', type: 'select', //доступно select,input,trigger,title,static values: { //значения (слева) выставляемые в поле TVmenu через Storage, справа - их видимое название в меню SwitchOff_None: 'Не отключать', SwitchOff_UA: 'Українська', SwitchOff_RU: 'Русский', SwitchOff_EN: 'English', }, default: 'SwitchOff_None' }, field: { name: 'Неиспользуемая клавиатура', //Название подпункта меню description: 'Выберите язык для отключения' //Комментарий к подпункту }, onChange: function (value) { //Действия при изменении подпункта if (Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_UA') { Lampa.Storage.set('keyboard_default_lang', 'default') var elementUA = $('.selectbox-item.selector > div:contains("Українська")'); if(elementUA.length > 0) elementUA.parent('div').hide(); } if (Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_RU') { Lampa.Storage.set('keyboard_default_lang', 'uk') var elementRU = $('.selectbox-item.selector > div:contains("Русский")'); if(elementRU.length > 0) elementRU.parent('div').hide(); } if ((Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_EN')&(Lampa.Storage.field('language') == 'uk')) { Lampa.Storage.set('keyboard_default_lang', 'uk') var elementEN = $('.selectbox-item.selector > div:contains("English")'); if(elementEN.length > 0) elementEN.parent('div').hide(); } if ((Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_EN')&(Lampa.Storage.field('language') == 'ru')) { Lampa.Storage.set('keyboard_default_lang', 'default') var elementEN = $('.selectbox-item.selector > div:contains("English")'); if(elementEN.length > 0) elementEN.parent('div').hide(); } } }); /*End Отключение неиспользуемой раскладки */ /* Торренты */ Lampa.SettingsApi.addComponent({ component: 'Multi_Menu_Component', name: 'Tweaks & Tricks', //Задаём название меню icon: '' }); Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'TORRENT_fix', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Контрастная рамка на торрентах', //Название подпункта меню description: 'Улучшает восприятие при выборе торрента' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта var green1 = '
'; var green2 = '
'; var green3 = '
'; var green4 = '
'; //var green5 = '
'; if(Lampa.Storage.field('TORRENT_fix') == true) { $('body').append(green1); $('body').append(green2); $('body').append(green3); $('body').append(green4); //$('body').append(green5); } if(Lampa.Storage.field('TORRENT_fix') == false) { $('#green_style').remove(); $('#greenn_style').remove(); $('#greennn_style').remove(); $('#greennnn_style').remove(); //$('#speedd_style').remove(); } //Lampa.Settings.update(); } }); /*End Торренты */ /* SpeedTest */ /* Отключенный сегмент */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'SpeedTest', type: 'static', //доступно select,input,trigger,title,static }, field: { name: 'SpeedTest', description: 'Замер скорости интернет-соединения для Skaz' }, onRender: function (item) { item.on('hover:enter', function(){ //Lampa.Iframe.show({url: 'http://zamerka.com/', Lampa.Iframe.show({url: 'http://62.84.100.7/speed.php', onBack: function onBack() {Lampa.Controller.toggle('settings_component');} });});} }); /* End Отключаемый сегмент */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'OpenSpeedTestParam', type: 'static', //доступно select,input,trigger,title,static }, field: { name: 'OpenSpeedTest', description: 'Замер скорости интернет-соединения' }, onRender: function (item) { item.on('hover:enter', function(){ var modal = $('

'); Lampa.Modal.open({ title: '', html: modal, size: 'medium', mask: true, onBack: function onBack() { Lampa.Modal.close(); Lampa.Controller.toggle('settings_component'); }, onSelect: function () {} });});} }); /* End SpeedTest */ /* Anime */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'ANIME_fix', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Удалить "Аниме" в главном меню', //Название подпункта меню description: '' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('ANIME_fix') == true) $("[data-action=anime]").eq(0).hide(); if(Lampa.Storage.field('ANIME_fix') == false) $("[data-action=anime]").eq(0).show(); //Lampa.Settings.update(); } }); /*End Anime */ /* SISI */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'SISI_fix', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Удалить "Клубника" в главном меню', //Название подпункта меню description: '' //Комментарий к подпункту }, onChange: function(value) { if(Lampa.Storage.field('SISI_fix') == false) { $('#app > div.wrap.layer--height.layer--width > div.wrap__left.layer--height > div > div > div > div > div:nth-child(1) > ul > li:contains("Клубничка")').show(); } if(Lampa.Storage.field('SISI_fix') == true) { $('#app > div.wrap.layer--height.layer--width > div.wrap__left.layer--height > div > div > div > div > div:nth-child(1) > ul > li:contains("Клубничка")').hide(); } } }); /* СТИЛИЗАЦИЯ кнопок просмотра с учётом MODS's */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'BUTTONS_fix', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Стилизовать кнопки просмотра', //Название подпункта меню description: 'Делает кнопки цветными' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('BUTTONS_fix') == true) { updateT() } Lampa.Settings.update(); }, onRender: function(item) { if(Lampa.Storage.field('BUTTONS_fix') == true) { updateT() } } }); /* End СТИЛИЗАЦИЯ кнопок */ if(Lampa.Storage.field('ANIME_fix') == true) $("[data-action=anime]").eq(0).hide(); if(Lampa.Storage.field('SISI_fix') == true) $("[data-action=sisi]").eq(0).show(); var d = 'dn'; /* Кнопка Перезагрузки и Консоли*/ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'Reloadbutton', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Добавить кнопку перезагрузки', //Название подпункта меню description: 'Иконка рядом с часами' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('Reloadbutton') == false) { $('#RELOAD').addClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == true) { $('#RELOAD').removeClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == false) { $('#CONSOLE').addClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == true) { $('#CONSOLE').removeClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == false) { $('#ExitButton').addClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == true) { $('#ExitButton').removeClass('hide'); } //Lampa.Settings.update(); } }); /* Кнопка Перезагрузки */ var my_reload = '
'; $('#app > div.head > div > div.head__actions').append(my_reload); $('#RELOAD').on('hover:enter hover:click hover:touch', function() { location.reload(); }); if(Lampa.Storage.field('Reloadbutton') == false) { $('#RELOAD').addClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == true) { $('#RELOAD').removeClass('hide'); } /* Кнопка Консоли */ var my_console = '
'; $('#app > div.head > div > div.head__actions').append(my_console); $('#CONSOLE').on('hover:enter hover:click hover:touch', function() { Lampa.Controller.toggle('console'); }); if(Lampa.Storage.field('Reloadbutton') == false) { $('#CONSOLE').addClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == true) { $('#CONSOLE').removeClass('hide'); } /* Кнопка Выхода в верхнем баре */ //var my_top_exit = '
'; var my_top_exit = '
'; $('#app > div.head > div > div.head__actions').append(my_top_exit); $('#my_top_exit').on('hover:enter hover:click hover:touch', function() { Lampa.Activity.out(); if(Lampa.Platform.is('tizen')) tizen.application.getCurrentApplication().exit(); if(Lampa.Platform.is('webos')) window.close(); if(Lampa.Platform.is('android')) Lampa.Android.exit(); if(Lampa.Platform.is('orsay')) Lampa.Orsay.exit(); }); if(Lampa.Storage.field('Reloadbutton') == false) { $('#my_top_exit').addClass('hide'); } if(Lampa.Storage.field('Reloadbutton') == true) { $('#my_top_exit').removeClass('hide'); } /* End Кнопка Перезагрузки и Консоли*/ /* Стиль в плеере - YouTube */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'YouTubeStyle', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Стилизация встроенного плеера', //Название подпункта меню description: 'В стиле YouTube' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('YouTubeStyle') == false) { $('#YOUTUBESTYLE').remove(); $('#YOUTUBESTYLE-POSITION').remove(); $('#YOUTUBESTYLE-POSITION-focus').remove(); } if(Lampa.Storage.field('YouTubeStyle') == true) { $('body').append(Lampa.Template.get('YOUTUBESTYLE', {}, true)); $('body').append(Lampa.Template.get('YOUTUBESTYLE-POSITION', {}, true)); $('body').append(Lampa.Template.get('YOUTUBESTYLE-POSITION-focus', {}, true)); } //Lampa.Settings.update(); }, onRender: function(item) { Lampa.Template.add('YOUTUBESTYLE', '
'); Lampa.Template.add('YOUTUBESTYLE-POSITION', '
'); Lampa.Template.add('YOUTUBESTYLE-POSITION-focus', '
'); } }); /* End Стиль в плеере - YouTube */ /* Часы в плеере - МЕНЮ */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'ClockInPlayer', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Часы во встроенном плеере', //Название подпункта меню description: 'Через 5 секунд после включения плеера' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта //Lampa.Settings.update(); } }); Lampa.Template.add('CLOCKSTYLE', '
'); var e = 2; $('body').append(Lampa.Template.get('CLOCKSTYLE', {}, true)); if (Lampa.Storage.field('ClockInPlayerPosition') == 'Center_Up'){ $('#clockstyle').remove(); Lampa.Template.add('CLOCKSTYLE', '
'); $('body').append(Lampa.Template.get('CLOCKSTYLE', {}, true)); } /* Часы в плеере - Функция*/ function updateClock() { var MyTime = document.querySelector("[class='head__time-now time--clock']").innerHTML; $("#MyClockDiv").remove(); $("#MyLogoDiv").remove() var MyDiv = ''; var MyLogo = '' $('.player').append(MyDiv); //$('.player').append(MyLogo) if(Lampa.Storage.field('ClockInPlayer') == true) { if (($('body > div.player > div.player-panel').hasClass( "panel--visible" ) == false) || ($('body > div.player > div.player-info').hasClass( "info--visible" ) == false)) { $('#MyClockDiv').removeClass('hide'); } } $("#MyClockDiv").text(MyTime); } /* Запускаем часы, интервал обновления 200 миллисекунд */ Lampa.Template.add('clockcenter', ''); $('body').append(Lampa.Template.get('clockcenter', {}, true)); setInterval(updateClock, 200); /* End Часы в плеере */ /* Положение часов в плеере */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'ClockInPlayerPosition', type: 'select', //доступно select,input,trigger,title,static values: { //значения (слева) выставляемые в поле TVmenu через Storage, справа - их видимое название в меню Left_Up: 'Слева сверху ', Left_Down: 'Слева снизу', Right_Up: 'Справа сверху', Right_Down: 'Справа снизу', Center_Up: 'В центре сверху', }, default: 'Left_Up' }, field: { name: 'Положение часов на экране', //Название подпункта меню description: 'Выберите угол экрана' //Комментарий к подпункту }, onChange: function (value) { //Действия при изменении подпункта document.querySelector("#clockstyle").remove(); if (Lampa.Storage.field('ClockInPlayerPosition') == 'Left_Up') Lampa.Storage.set('Clock_coordinates', 'bottom: 90%!important; right: 90%!important'); if (Lampa.Storage.field('ClockInPlayerPosition') == 'Left_Down') Lampa.Storage.set('Clock_coordinates', 'bottom: 10%!important; right: 90%!important'); //bottom: 90%!important; right: 10%!important if (Lampa.Storage.field('ClockInPlayerPosition') == 'Right_Up') Lampa.Storage.set('Clock_coordinates', 'bottom: 90%!important; right: 12%!important'); if (Lampa.Storage.field('ClockInPlayerPosition') == 'Right_Down') Lampa.Storage.set('Clock_coordinates', 'bottom: 10%!important; right: 5%!important'); Lampa.Template.add('CLOCKSTYLE', '
'); $('body').append(Lampa.Template.get('CLOCKSTYLE', {}, true)); if (Lampa.Storage.field('ClockInPlayerPosition') == 'Center_Up'){ $('#clockstyle').remove(); Lampa.Template.add('CLOCKSTYLE', '
'); $('body').append(Lampa.Template.get('CLOCKSTYLE', {}, true)); } //Lampa.Settings.update(); } }); /*End Положение часов в плеере */ /* Кнопка YouTube */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'YouTube', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Раздел YouTube', //Название подпункта меню description: 'Добавляет YouTube в главном меню' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('YouTube') == false) { $('#YouTubeButton').addClass('hide'); } if(Lampa.Storage.field('YouTube') == true) { $('#YouTubeButton').removeClass('hide'); } //Lampa.Settings.update(); } }); /* End Кнопка YouTube */ /* Кнопка RuTube */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'RuTube', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Раздел RuTube', //Название подпункта меню description: 'Добавляет RuTube в главном меню' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('RuTube') == false) { $('#RuTubeButton').addClass('hide'); } if(Lampa.Storage.field('RuTube') == true) { $('#RuTubeButton').removeClass('hide'); } //Lampa.Settings.update(); } }); /* End Кнопка RuTube */ /* Кнопка Twitch */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'Twitch', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Раздел Twitch', //Название подпункта меню description: 'Добавляет Twitch в главном меню' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта if(Lampa.Storage.field('Twitch') == false) { $('#TwitchButton').addClass('hide'); } if(Lampa.Storage.field('Twitch') == true) { $('#TwitchButton').removeClass('hide'); } //Lampa.Settings.update(); } }); /* End Кнопка Twitch */ /* ТоррСервер */ Lampa.SettingsApi.addParam({ component: 'Multi_Menu_Component', param: { name: 'Tricks_TorrServer', type: 'trigger', //доступно select,input,trigger,title,static default: false }, field: { name: 'Использовать "народный" TorrServer', //Название подпункта меню description: 'Работает после запроса доступа у @AndreyURL54' //Комментарий к подпункту }, onChange: function(value) { //Действия при изменении подпункта var tricks_usermail = Lampa.Storage.field('account_email').toLowerCase(); Lampa.Storage.set('torrserver_use_link', (value == '0') ? 'one' : 'two'); Lampa.Storage.set('torrserver_auth', true); Lampa.Storage.set('torrserver_login', tricks_usermail); Lampa.Storage.set('torrserver_password', tricks_usermail); if(Lampa.Storage.field('Tricks_TorrServer') == true) Lampa.Storage.set('torrserver_url_two', '95.215.8.180:9098'); if(Lampa.Storage.field('Tricks_TorrServer') == false) { Lampa.Storage.set('torrserver_url_two', ''); Lampa.Storage.set('torrserver_login', ''); Lampa.Storage.set('torrserver_password', ''); } //Lampa.Settings.update(); } }); /*End ТоррСервер */ /* METRIKA */ (function(m, e, t, r, i, k, a) { m[i] = m[i] || function() { (m[i].a = m[i].a || []).push(arguments) }; m[i].l = 1 * new Date(); for(var j = 0; j < document.scripts.length; j++) { if(document.scripts[j].src === r) { return; } } k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a) }) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(92135047, "init", { clickmap: true, trackLinks: true, accurateTrackBounce: true }); var METRIKA = ''; $('body').append(METRIKA); /* End METRIKA */ /* * ШАБЛОНЫ */ /* Скрываем баннер Трейлеров на Главной */ if (Lampa.Storage.field('NoTrailerMainPage') == true) { var intervalID setTimeout(function() { intervalID = setInterval(function() { /* Мы на Главной? */ if (Lampa.Activity.active().component == 'main' && Lampa.Activity.active().source == 'cub') { $('#NoTrailerMainPage').remove(); var banner = 'div.activity__body > div > div > div > div > div:nth-child(1)' Lampa.Template.add('NoTrailerMainPage', '
'); $('body').append(Lampa.Template.get('NoTrailerMainPage', {}, true)); } /* Вышли из Главной */ if (Lampa.Activity.active().component !== 'main') { $('#NoTrailerMainPage').remove() } /* Мы в разделе Фильмы? */ if (Lampa.Activity.active().component == 'category' && Lampa.Activity.active().url == 'movie' && Lampa.Activity.active().source == 'cub') { $('#NoTrailerMainPage').remove(); var banner = 'div.activity__body > div > div > div > div > div:nth-child(2)' Lampa.Template.add('NoTrailerMainPage', '
'); $('body').append(Lampa.Template.get('NoTrailerMainPage', {}, true)); } if (Lampa.Storage.field('NoTrailerMainPage') == false) { clearInterval(intervalID) } }, 500) }, 1000); } /* Скрываем часы на заставке CUB и Chromecast */ if (Lampa.Storage.field('NoTimeNoDate') == true) { /* CUB */ Lampa.Template.add('notimedatescreen', '
'); $('body').append(Lampa.Template.get('notimedatescreen', {}, true)); /* Chromecast */ var notimedatescreenInterval = setInterval(function() { var elementScreenSaver = $('.screensaver-chrome') if (elementScreenSaver.length > 0){ /* var inScript = '' $('body').append(inScript); */ } }, 1000) // Interval // clearInterval(notimedatescreenInterval); /* });; */ } /* Стиль скрытия панели навигации при старте */ if (Lampa.Storage.field('NavyBar') == true) { $('.menu__item').on('click', function () { this.removeClass('focus'); this.addClass('focus'); }); Lampa.Template.add('no_bar', '
'); $('body').append(Lampa.Template.get('no_bar', {}, true)); var searchReturnButton = '
\n' + ' \n' + '
\n'; $('#app > div.head > div > div.head__actions').append(searchReturnButton); $('#searchReturnButton').on('hover:enter hover:click hover:touch', function() {Lampa.Search.open();}); }; /* if (Lampa.Storage.field('NavyBar') == false) { $('#no_bar').remove(); }; */ /* Стиль в плеере - YouTube при старте*/ if(Lampa.Storage.field('YouTubeStyle') == true) { Lampa.Template.add('YOUTUBESTYLE', '
'); Lampa.Template.add('YOUTUBESTYLE-POSITION', '
'); Lampa.Template.add('YOUTUBESTYLE-POSITION-focus', '
'); $('body').append(Lampa.Template.get('YOUTUBESTYLE', {}, true)); $('body').append(Lampa.Template.get('YOUTUBESTYLE-POSITION', {}, true)); $('body').append(Lampa.Template.get('YOUTUBESTYLE-POSITION-focus', {}, true)); } /* Кнопка YouTube */ var TubeSVG = '' var tubemenu = $('
'); $('.menu .menu__list').eq(0).append(tubemenu) if(Lampa.Storage.field('YouTube') == true) { $('#YouTubeButton').removeClass('hide'); } tubemenu.on('hover:enter', function() { //window.location.href = 'https://youtube.com/tv' if (Lampa.Platform.is('webos')) { webOS.service.request("luna://com.webos.applicationManager", { method: "launch", parameters: { "id": "youtube.leanback.v4"}, onSuccess: function (inResponse) { console.log("The app is launched"); }, onFailure: function (inError) { console.log("Failed to launch the app"); console.log("[" + inError.errorCode + "]: " + inError.errorText); return; } }); } if (Lampa.Platform.is('android')) { Lampa.Android.openYoutube('TeUQrJrfrkk'); } else window.location.href = 'https://youtube.com/tv' //Android.openYoutube(a.id) else YouTube.play(a.id) }) /* Кнопка RuTube */ var RuTubeSVG = '' var rutubemenu = $('
'); $('.menu .menu__list').eq(0).append(rutubemenu) if(Lampa.Storage.field('RuTube') == true) { $('#RuTubeButton').removeClass('hide'); } rutubemenu.on('hover:enter', function() { //window.location.href = 'https://youtube.com/tv' if (Lampa.Platform.is('webos')) { window.location.href = 'https://bit.ly/3DnLr2O' } if (Lampa.Platform.is('tizen')) { var rutubeurl = 'https://bit.ly/3RcgRPq' //window.location.href = 'https://bit.ly/3RcgRPq' var e = new tizen.ApplicationControl("https://tizen.org/appcontrol/operation/view", rutubeurl); tizen.application.launchAppControl(e, null, function () {}, function (e) { Lampa.Noty.show(e);}) //window.location.href = 'https://bit.ly/3RcgRPq' } if (Lampa.Platform.is('android')) { Android.openYoutube(); } else window.open('https://bit.ly/3DnLr2O', '_blank'); //Android.openYoutube(a.id) else YouTube.play(a.id) }) /* Кнопка Twitch */ var TwitchSVG = '' var twitchmenu = $('
'); $('.menu .menu__list').eq(0).append(twitchmenu) if(Lampa.Storage.field('Twitch') == true) { $('#TwitchButton').removeClass('hide'); } twitchmenu.on('hover:enter', function() { if (Lampa.Platform.is('webos')) { window.open('https://webos.tv.twitch.tv', '_blank'); } if (Lampa.Platform.is('orsay')) { window.open('https://fgl27.github.io/SmartTwitchTV/release/index.html', '_blank'); } if (Lampa.Platform.is('tizen')) { window.open('https://tizen.tv.twitch.tv', '_blank'); /* var twitchurl = 'https://tizen.tv.twitch.tv'; var e = new tizen.ApplicationControl("https://tizen.org/appcontrol/operation/view", twitchurl); tizen.application.launchAppControl(e, null, function () {}, function (e) { Lampa.Noty.show(e);}) */ /* var twitchurl = 'https://fgl27.github.io/SmartTwitchTV/release/index.html' window.open(twitchurl, '_blank'); */ } if (Lampa.Platform.is('android')) { window.open('https://android.tv.twitch.tv', '_blank'); //Android.openTwitch(); } if (Lampa.Platform.is('browser')) { window.open('https://twitch.tv', '_blank'); } if (Lampa.Platform.is('vidaa')) { window.open('https://tv.twitch.tv', '_blank'); } //else window.open('https://fgl27.github.io/SmartTwitchTV/release/index.html', '_blank'); }) /* Активация торрентов при старте */ var green1 = '
'; var green2 = '
'; var green3 = '
'; var green4 = '
'; //var green5 = '
'; if(Lampa.Storage.field('TORRENT_fix') == true) { $('body').append(green1); $('body').append(green2); $('body').append(green3); $('body').append(green4); //$('body').append(green5); } var timerId; timerId = setInterval(updateT, 1000); //updateT(); // (*) /* Отключение языков при старте */ setInterval(function() { var elementCHlang = $('div.hg-button.hg-functionBtn.hg-button-LANG.selector.binded') if (elementCHlang.length > 0){ if (Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_UA') { Lampa.Storage.set('keyboard_default_lang', 'default') var elementUA = $('.selectbox-item.selector > div:contains("Українська")'); if(elementUA.length > 0) elementUA.parent('div').hide(); } if (Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_RU') { Lampa.Storage.set('keyboard_default_lang', 'uk') var elementRU = $('.selectbox-item.selector > div:contains("Русский")'); if(elementRU.length > 0) elementRU.parent('div').hide(); } if ((Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_EN')&(Lampa.Storage.field('language') == 'uk')) { Lampa.Storage.set('keyboard_default_lang', 'uk') var elementEN = $('.selectbox-item.selector > div:contains("English")'); if(elementEN.length > 0) elementEN.parent('div').hide(); } if ((Lampa.Storage.field('KeyboardSwitchOff') == 'SwitchOff_EN')&(Lampa.Storage.field('language') == 'ru')) { Lampa.Storage.set('keyboard_default_lang', 'default') var elementEN = $('.selectbox-item.selector > div:contains("English")'); if(elementEN.length > 0) elementEN.parent('div').hide(); } } }, 0) /* Удаление SISI при старте */ if(Lampa.Storage.field('SISI_fix') == true) { setTimeout(function() { $('#app > div.wrap.layer--height.layer--width > div.wrap__left.layer--height > div > div > div > div > div:nth-child(1) > ul > li:contains("Клубничка")').hide() }, 3000); } /* Активация кнопки возврата при старте */ $('body').append(''); Lampa.Template.add('butt_style', ''); $('body').append(Lampa.Template.get('butt_style', {}, true)); $(".elem-mobile-back").on("click", function () { Lampa.Activity.back(); }); if (Lampa.Storage.field('BackButton') == true) { $('#backit').removeClass('hide') } /* Добавляем кнопку выхода из плеера */ setInterval(function() { var exitSVG = '
' $('#ExitButton').remove() if (Lampa.Storage.field('BackButton') == true){ $('.player-panel__right').append(exitSVG) $('#ExitButton').css("padding","0.05em") $('#ExitButton').on('hover:enter hover:click hover:touch', function() { $('#ExitButton').remove() $('.player').remove(); }); } }, 3000) /* End Активация кнопки возврата при старте */ } // end of Add (main function) /* Если всё готово */ if(window.appready) add(); else { Lampa.Listener.follow('app', function(e) { if(e.type == 'ready') { add(); } }); } })();
